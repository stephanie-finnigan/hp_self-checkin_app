@using SelfCheckinWebApp.Enums
@model SelfCheckinWebApp.ViewModels.BookingViewModel

@{
    ViewBag.Title = "BookingExtras";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var featureSwitchValues = ViewBag.FeatureSwitchValues;
    var turndownVal = featureSwitchValues[FeatureSwitchEnum.Turndown];
    var preAuthVal = featureSwitchValues[FeatureSwitchEnum.PreAuth];
    var dinnerResVal = featureSwitchValues[FeatureSwitchEnum.DinnerReservation];
}

<div class="bkg-info">
    <div class="bkg-ref">
        @Html.LabelFor(model => model.BookingID)
        @Html.DisplayFor(model => model.BookingID)
    </div>
</div>
<hr />
<div class="s4-headers">
    <div class="extras-title">Booking Extras</div>
</div>
@using (Html.BeginForm("AddExtras", "CheckIn", FormMethod.Post, new { @class = "form-horizontal bkg-extras" }))
{
    @Html.AntiForgeryToken()

    <div class="extras">
        <div class="veh-reg">
            <div class="form-group">
                @Html.LabelFor(model => model.VehicleRegistration, new { @class = "control-label col-sm-5 col-md-5" })
                <div class="col-sm-5 col-md-5">
                    @Html.EditorFor(model => model.VehicleRegistration, new { htmlAttributes = new { @class = "form-control", @style = "text-transform: uppercase" } })
                    @Html.ValidationMessageFor(model => model.VehicleRegistration, "", new { @class = "text-danger" })
                </div>
            </div>
        </div>
        <div class="eta">
            <div class="form-group">
                @Html.LabelFor(model => model.SelectedETA, new { @class = "control-label col-sm-5 col-md-5" })
                <div class="col-xs-12 col-sm-5 col-md-5">
                    @Html.DropDownListFor(model => model.SelectedETA, new SelectList(ViewBag.EtaTimes), "", new { @class = "form-control" })
                    @Html.ValidationMessageFor(model => model.SelectedETA, "", new { @class = "text-danger" })
                </div>
            </div>
        </div>
        <div class="chkin-notes">
            <div class="form-group">
                @Html.LabelFor(model => model.CheckInNotes, new { @class = "control-label col-sm-4 col-md-4" })
                <div class="col-sm-12 col-md-12">
                    @Html.EditorFor(model => model.CheckInNotes, new { htmlAttributes = new { @class = "form-control", @rows = 6 } })
                    @Html.ValidationMessageFor(model => model.CheckInNotes, "", new { @class = "text-danger" })
                </div>
            </div>
        </div>
        <div class="send-invoice">
            @Html.LabelFor(model => model.SendInvoice, new { @class = "control-label col-sm-7 col-md-7" })
            <div class="form-group">
                <div class="radio-inline">
                    @Html.RadioButton("AnswerSI", "Yes", new { @id = "selectedYes" })
                    @Html.Label("Yes")
                </div>
                <div class="radio-inline">
                    @Html.RadioButton("AnswerSI", "No", new { @id = "selectedNo" })
                    @Html.Label("No")
                </div>
            </div>
        </div>

        @if (turndownVal == "true")
        {
            <div class="turndown-reqd">
                @Html.LabelFor(model => model.TurndownReqd, new { @class = "control-label col-sm-7 col-md-7" })
                <div class="form-group">
                    <div class="radio-inline">
                        @Html.RadioButton("AnswerTD", "Yes", new { @id = "selectedYes" })
                        @Html.Label("Yes")
                    </div>
                    <div class="radio-inline">
                        @Html.RadioButton("AnswerTD", "No", new { @id = "selectedNo" })
                        @Html.Label("No")
                    </div>
                </div>
            </div>
        } 
    </div>
    if (preAuthVal == "true")
    {
        <div class="fast-chkout">
            <div class="form-group">
                <div class="checkbox-inline">
                    @Html.CheckBoxFor(model => model.FastCheckout)
                    @Html.Label("Please use pre-authorised card on checkout")
                </div>
            </div>
        </div>
    }
    <hr />
    <footer>
        <div class="back-btn">
            @if (dinnerResVal == "false")
            {
                @Html.ActionLink("Back", "NewspapersAlarmCalls", "CheckIn", new { @class = "btn btn-primary" })
            }
            else if (Model.DinnerReservations.Count == 0)
            {
                @Html.ActionLink("Back", "DinnerReservation", "CheckIn", new { @class = "btn btn-primary" })
            }
            else
            {
                @Html.ActionLink("Back", "DinnerReservationForm", "CheckIn", new { @class = "btn btn-primary" })
            }
        </div>
        <div class="proceed-btn">
            <input type="submit" value="Proceed" class="btn btn-primary" />
        </div>
    </footer>
}

