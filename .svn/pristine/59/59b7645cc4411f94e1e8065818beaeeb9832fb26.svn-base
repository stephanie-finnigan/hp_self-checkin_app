@model SelfCheckinWebApp.ViewModels.BookingViewModel

@{
    ViewBag.Title = "NewspapersAlarmCalls";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var mode = ViewBag.Mode;
}

<div class="bkg-info">
    <div class="bkg-ref">
        @Html.LabelFor(model => model.BookingID)
        @Html.DisplayFor(model => model.BookingID)
    </div>
    @if (!string.IsNullOrEmpty(mode))
    {
        <div class="bkg-rm">
            @Html.LabelFor(model => model.FirstNightRoomNo)
            @Html.DisplayFor(model => model.FirstNightRoomNo)
        </div>
    }
</div>
<hr />

@Html.Partial("_AddNewspapersPartial", Model.AddNewspapers)
<div class="newspapers-container">
    <table class="table" id="papers">
        <tbody>
            @foreach (var grpDate in Model.Newspapers.Select(p => p.NewspaperDate).Distinct().ToList())
            {
                if (grpDate != default(DateTime))
                {
                    <tr>
                        <td>
                            @string.Format("{0:dd/MM/yy}", grpDate)
                        </td>
                        <td>
                            @string.Join(", ", Model.Newspapers.Where(p => p.NewspaperDate == grpDate).Select(p => p.Description).ToArray())
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>
<hr />

@Html.Partial("_AddAlarmCallsPartial", Model.AddAlarmCall)
<div class="alarmcalls-container">
    <table class="table" id="alarm-calls">
        <tbody>
            @foreach (var call in Model.GuestReminders)
            {
                if ((int)call.ReminderType == 1 && call.Time != default(DateTime))
                {
                    <tr>
                        <td>
                            @call.Time.Date.ToShortDateString()
                        </td>
                        <td>
                            @call.Time.ToShortTimeString()
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>
<hr />

<footer>
    <div class="back-btn">
        @Html.ActionLink("Back", "InternationalDetails", "CheckIn", new { id = Model.BookingID }, new { @class = "btn btn-primary" })
    </div>
    <div class="proceed-btn">
        @Html.ActionLink("Proceed", "DinnerReservation", "CheckIn", new { @class = "btn btn-primary" })
    </div>
</footer>